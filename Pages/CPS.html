<!DOCTYPE html>
<!--This is for testing purposes only-->
<html>
  <head>
    <meta charset="utf-8">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/processing.js/1.4.8/processing.min.js"></script>
    <style>
      body {position: absolute;}
      h1 {color: #006400; font-size: 250%; font-family: "times new roman";}
      h2 {color: #006400; font-size: 150%; font-family: "times new roman";}
      p {color: #000000; font-family: "times new roman";}
      a {color: #0000FF; text-decoration: underline;}
    </style>
    <title>CPS Meter</title>
    <link rel="icon" type="image/jpeg" href="/LogoSimple.jpeg">
    <link rel="shortcut icon" type="image/jpeg" href="/LogoSimple.jpeg">
    <meta name="msapplication-TileImage" content="/LogoSimple.jpeg">
    <link rel="apple-touch-icon" id="apple-touch-icon" href="/LogoSimple.jpeg">
    <meta name="apple-mobile-web-app-title" content="WÌµ">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  </head>
  <body>
    <h1>Browser CPS & FPS Tester</h1>
    <br>
    <br>
    <p>Colour:</p>
    <script type="text/processing" data-processing-target="processing-canvas">
   void setup() {
      size(400, 400);
      frameRate(1000);
      textSize(20);
      textAlign(CENTER,CENTER);
      fill(200);
      noStroke();
   }
   
   int peakCPS = 1;
   
   int CPF = 100;
   int tickCount = 0;
   
   int sampleTime = 500;
   int lastTime = millis();
   int lastFrame = frameCount;
   int cps = 1;
   
   
   void draw() {
      background(100);
      
      for (int tick = 0; tick < CPF; tick += 1) {
         
         int now = millis();
         int elapsed = now-lastTime;
         if(elapsed > sampleTime){
            cps = 1000 * (tickCount - lastFrame) / elapsed;
            lastTime = now;
            lastFrame = tickCount;
         }
         
         tickCount += 1;
      }
      
      if(frameRate > 200){
         CPF += 1;
      }
      if(frameRate > 150){
         CPF += 1;
      }
      if(frameRate > 100){
         CPF += 1;
      }
      if(frameRate > 50){
         CPF += 1;
      }
      
      if(cps > peakCPS){
         peakCPS = cps;
      }
      
      text("Calculations Per Frame: "+CPF,200,100);
      text("Frames Per Second: "+floor(frameRate),200,150);
      text("Calculations Per Second: "+floor(cps),200,200);
      text("Highest CPS: "+floor(peakCPS),200,250);
      
   }
    </script>
    <canvas id="processing-canvas"> </canvas>
    <br>
    <br>
  </body>
</html>
